{"title":"探索LCU","uid":"d963b9f41994dba4a0ae074a338ebfb7","slug":"2023-07-11-探索LCU","date":"2023-07-11T04:00:00.000Z","updated":"2023-11-11T06:01:35.703Z","comments":true,"path":"api/articles/2023-07-11-探索LCU.json","keywords":"Kangwei Zhu's Blog","cover":[],"content":"<h1 id=\"LeagueWare–仿照Wegame从零构建第三方英雄联盟客户端助手\"><a href=\"#LeagueWare–仿照Wegame从零构建第三方英雄联盟客户端助手\" class=\"headerlink\" title=\"LeagueWare–仿照Wegame从零构建第三方英雄联盟客户端助手\"></a>LeagueWare–仿照Wegame从零构建第三方英雄联盟客户端助手</h1><p><strong>项目依赖</strong></p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #908CAA; font-style: italic\">&lt;!--</span><span style=\"color: #6E6A86; font-style: italic\">JSON转Map依赖</span><span style=\"color: #908CAA; font-style: italic\">--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">dependency</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">groupId</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">com.fasterxml.jackson.core</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">groupId</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">artifactId</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">jackson-databind</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">artifactId</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">version</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">2.13.0</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">version</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">dependency</span><span style=\"color: #6E6A86\">&gt;</span></span></code></pre></div><div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #908CAA; font-style: italic\">&lt;!--</span><span style=\"color: #6E6A86; font-style: italic\">Lombok依赖</span><span style=\"color: #908CAA; font-style: italic\">--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #908CAA; font-style: italic\">&lt;!--</span><span style=\"color: #6E6A86; font-style: italic\"> https://mvnrepository.com/artifact/org.projectlombok/lombok </span><span style=\"color: #908CAA; font-style: italic\">--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">dependency</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">groupId</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">org.projectlombok</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">groupId</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">artifactId</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">lombok</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">artifactId</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">version</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">1.18.30</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">version</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #6E6A86\">&lt;</span><span style=\"color: #9CCFD8\">scope</span><span style=\"color: #6E6A86\">&gt;</span><span style=\"color: #E0DEF4\">provided</span><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">scope</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86\">&lt;/</span><span style=\"color: #9CCFD8\">dependency</span><span style=\"color: #6E6A86\">&gt;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>注意, 不同于Web项目, JavaFX项目在引入maven依赖后, 还需要将依赖放入module-info中</strong></p>\n<p>比如这样子</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #3E8FB0\">module</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #9CCFD8\">com</span><span style=\"color: #E0DEF4\">.anicaaz.leaguewarefx </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">requires</span><span style=\"color: #E0DEF4\"> javafx.controls;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">requires</span><span style=\"color: #E0DEF4\"> javafx.fxml;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">requires</span><span style=\"color: #E0DEF4\"> lombok;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">requires</span><span style=\"color: #E0DEF4\"> com.fasterxml.jackson.databind;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">opens</span><span style=\"color: #E0DEF4\"> com.anicaaz.leaguewarefx </span><span style=\"color: #3E8FB0\">to</span><span style=\"color: #E0DEF4\"> javafx.fxml;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">exports</span><span style=\"color: #E0DEF4\"> com.anicaaz.leaguewarefx;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">exports</span><span style=\"color: #E0DEF4\"> com.anicaaz.leaguewarefx.controller;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">opens</span><span style=\"color: #E0DEF4\"> com.anicaaz.leaguewarefx.controller </span><span style=\"color: #3E8FB0\">to</span><span style=\"color: #E0DEF4\"> javafx.fxml;</span></span>\n<span class=\"line\"><span style=\"color: #908CAA\">&#125;</span></span></code></pre></div><p><strong>一些有用的资源</strong></p>\n<ol>\n<li>所有版本的资源文件: <a href=\"https://raw.communitydragon.org/\">https://raw.communitydragon.org/</a></li>\n</ol>\n<h2 id=\"1-获取remote-Auth-token-和-app-port\"><a href=\"#1-获取remote-Auth-token-和-app-port\" class=\"headerlink\" title=\"1. 获取remote-Auth-token 和 app-port\"></a>1. 获取remote-Auth-token 和 app-port</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>当英雄联盟客户端正在运行时, 它会向我们的localhost暴露一个端口. 我们可以通过remote</p></blockquote>\n<p>Windows下(需要提权)</p>\n<div class=\"language-powershell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">powershell</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E0DEF4\">wmic </span><span style=\"color: #3E8FB0\">PROCESS</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">WHERE</span><span style=\"color: #E0DEF4\"> name</span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #F6C177\">&#39;LeagueClientUx.exe&#39;</span><span style=\"color: #E0DEF4\"> GET commandline </span></span></code></pre></div><p>Linux下</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EA9A97\">ps</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">-eo</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #F6C177\">pid,cmd</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">|</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">grep</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #F6C177\">&#39;LeagueClientUx.exe&#39;</span></span></code></pre></div><ul>\n<li><code>ps -eo pid,cmd</code>: 列出所有进程的进程ID（pid）和命令行（cmd）信息。<ul>\n<li>ps: process state的简称</li>\n<li>eo: 表示你可以制定你要的列</li>\n<li>cmd则是命令</li>\n</ul>\n</li>\n<li><code>grep &#39;LeagueClientUx.exe&#39;</code>: 使用 <code>grep</code> 过滤出包含 ‘LeagueClientUx.exe’ 的行，即与你指定的进程相关的信息。</li>\n</ul>\n<p>然后就会得到下面这样子一长串的键值对</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #e0def4\">-riotclient-auth-token=E4z7AQD982BWJO09cYzLrA --riotclient-app-port=40465 --no-rads --disable-self-update --region=NA --locale=en_US --client-config-url=https://clientconfig.rpg.riotgames.com --riotgamesapi-standalone --riotgamesapi-settings=eyJjbGllbnQtY29uZmlnIjp7InVybCI6Imh0dHBzOi8vY2xpZW50Y29uZmlnLnJwZy5yaW90Z2FtZXMuY29tIn0sImRlZmF1bHRfcmVnaW9uIjoiTkEiLCJnbG9iYWxzIjp7InNlc3Npb24taWQiOiIxZWY1NDUxMS03OGQ2LTU3NGUtOTY1MC1lMTFiOTUyMzgwOTQifSwicGF0Y2hsaW5lX2lkIjoibGl2ZSIsInByb2R1Y3QtaW50ZWdyYXRpb24iOnsiYXBwLXVwZGF0ZS1zdGF0dXMiOiJDOi9Qcm9ncmFtRGF0YS9SaW90IEdhbWVzL01ldGFkYXRhL2xlYWd1ZV9vZl9sZWdlbmRzLmxpdmUvbGVhZ3VlX29mX2xlZ2VuZHMubGl2ZS51cGRhdGUtc3RhdHVzLmpzb24iLCJoZWFydGJlYXQiOiJDOi91c2Vycy9hbmljYWEvQXBwRGF0YS9Mb2NhbC9SaW90IEdhbWVzL1Jpb3QgQ2xpZW50L0RhdGEvU2Vzc2lvbnMvMWVmNTQ1MTEtNzhkNi01NzRlLTk2NTAtZTExYjk1MjM4MDk0L0U0ejdBUUQ5ODJCV0pPMDljWXpMckEuaGVhcnRiZWF0Lmpzb24iLCJsb2NrZmlsZSI6IkM6L1Byb2dyYW1EYXRhL1Jpb3QgR2FtZXMvTWV0YWRhdGEvbGVhZ3VlX29mX2xlZ2VuZHMubGl2ZS9sZWFndWVfb2ZfbGVnZW5kcy5saXZlLmxvY2tmaWxlIiwic2V0dGluZ3MiOiJDOi9Qcm9ncmFtRGF0YS9SaW90IEdhbWVzL01ldGFkYXRhL2xlYWd1ZV9vZl9sZWdlbmRzLmxpdmUvbGVhZ3VlX29mX2xlZ2VuZHMubGl2ZS5wcm9kdWN0X3NldHRpbmdzLnlhbWwifSwicHJvZHVjdF9pZCI6ImxlYWd1ZV9vZl9sZWdlbmRzIiwicHVibGlzaGVyIjoicmlvdCIsInJlZ2lvbl9kYXRhIjp7Ik5BIjp7ImF2YWlsYWJsZV9sb2NhbGVzIjpbImNzX0NaIiwiZGVfREUiLCJlbF9HUiIsImVuX0FVIiwiZW5fR0IiLCJlbl9QSCIsImVuX1NHIiwiZW5fVVMiLCJlc19BUiIsImVzX0VTIiwiZXNfTVgiLCJmcl9GUiIsImh1X0hVIiwiaXRfSVQiLCJqYV9KUCIsImtvX0tSIiwicGxfUEwiLCJwdF9CUiIsInJvX1JPIiwicnVfUlUiLCJ0aF9USCIsInRyX1RSIiwidmlfVk4iLCJ6aF9NWSIsInpoX1RXIl0sImRlZmF1bHRfbG9jYWxlIjoiZW5fVVMiLCJyc28iOnsiY2xpZW50IjoibG9sIn19fSwicmlvdGNsaWVudCI6eyJhcHAtcG9ydCI6IjQwNDY1IiwiYXV0aC10b2tlbiI6IkU0ejdBUUQ5ODJCV0pPMDljWXpMckEifSwicmlvdGdhbWVzYXBpIjp7InBlcnNpc3RlbmNlLXBhdGgiOiJDOi91c2Vycy9hbmljYWEvQXBwRGF0YS9Mb2NhbC9SaW90IEdhbWVzL0xlYWd1ZSBvZiBMZWdlbmRzIn0sInJzb19hdXRoIjp7ImF1dGhvcml6YXRpb24ta2V5IjoiZXcwS0lDQWdJQ0pqYjJSbElqb2dJbVJZWTNoUGJGSnBUMVZXTUZWdFpISlZhMHAzV2xSYWVGVkZhRTFVUjA1U1RVWkZkVmxYYkVWaFdFWklVVmQzTUU5WFJrSmFNbWh6WTBSR1NtTnFiRU5hZHowOUlpd05DaUFnSUNBaVkyOWtaVjkyWlhKcFptbGxjaUk2SUNJNFNVWkxWVk4xVGs5WWFqaHpTM0p0V0RJNGVHSm5aMUkwUmxrNWVtaG9ObVk0VkZReFFuZDJaa3BVZVZCMGJqZGpWbUpvVEZKT2VrdEVVa2RvUkhWVk5sQjVhRnBmV0RKWGRsVlhVMmQzTjFjMFkxVldaeUlOQ24wPSJ9fQ== --rga-lite --remoting-auth-token=WMQXBHuk7kPpoS-QyqXm5A --respawn-command=LeagueClient.exe --respawn-display-name=League of Legends --app-port=40703 --install-directory=C:\\Riot Games\\League of Legends --app-name=LeagueClient --ux-name=LeagueClientUx --ux-helper-name=LeagueClientUxHelper --log-dir=LeagueClient Logs --crash-reporting= --crash-environment=NA1 --app-log-file-path=C:/Riot Games/League of Legends/Logs/LeagueClient Logs/2023-11-10T20-45-00_1740_LeagueClient.log --app-pid=1740 --output-base-dir=C:\\Riot Games\\League of Legends --no-proxy-server --ignore-certificate-errors</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span></code></pre></div><p>拿到了以上输出之后, 我们就可以开始对其进行字符串处理了.</p>\n<p>在使用java的情况下, 我们可以用<code>ProcessBuilder</code>类的start方法来创建一个进程, 执行获取正在运行的英雄联盟客户端的参数.</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #3E8FB0\">package</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">com</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">anicaaz</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">leaguewarefx</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">utils</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #3E8FB0\">import java</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">io</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">BufferedReader</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #3E8FB0\">import java</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">io</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">IOException</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #3E8FB0\">import java</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">io</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">InputStreamReader</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #3E8FB0\">import java</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">util</span><span style=\"color: #908CAA\">.</span><span style=\"color: #3E8FB0\">List</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #3E8FB0\">public</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">class</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #9CCFD8\">ExecuteCommand</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">    </span><span style=\"color: #908CAA; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">     * Get the token of current running lcu process.</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">     * </span><span style=\"color: #3E8FB0; font-style: italic\">@return</span><span style=\"color: #6E6A86; font-style: italic\"> The Remoting-Auth-Token of cmdline output.</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">     </span><span style=\"color: #908CAA; font-style: italic\">*/</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">public</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">static</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">String</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">getRemoteAuthToken</span><span style=\"color: #908CAA\">()</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">ProcessBuilder</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">processBuilder</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">ProcessBuilder</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot;bash&quot;</span><span style=\"color: #908CAA\">,</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #F6C177\">&quot;-c&quot;</span><span style=\"color: #908CAA\">,</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #F6C177\">&quot;ps -eo cmd | grep &#39;LeagueClientUx.exe&#39;&quot;</span><span style=\"color: #908CAA\">);</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">String</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">remoteAuthToken</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">null</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">try</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">Process</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">lcuProcess</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">processBuilder</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">start</span><span style=\"color: #908CAA\">();</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">BufferedReader</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">reader</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">BufferedReader</span><span style=\"color: #908CAA\">(</span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">InputStreamReader</span><span style=\"color: #908CAA\">(</span><span style=\"color: #E0DEF4; font-style: italic\">lcuProcess</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">getInputStream</span><span style=\"color: #908CAA\">()));</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">String</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">line</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">while</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">((</span><span style=\"color: #E0DEF4\">line </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">reader</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">readLine</span><span style=\"color: #908CAA\">())</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">!=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">null</span><span style=\"color: #908CAA\">)</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                </span><span style=\"color: #3E8FB0\">if</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">(</span><span style=\"color: #E0DEF4; font-style: italic\">line</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">contains</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot;--remoting-auth-token&quot;</span><span style=\"color: #908CAA\">))</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                    remoteAuthToken </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">line</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">split</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot;--remoting-auth-token=&quot;</span><span style=\"color: #908CAA\">)[</span><span style=\"color: #EA9A97\">1</span><span style=\"color: #908CAA\">].</span><span style=\"color: #EA9A97\">split</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot; &quot;</span><span style=\"color: #908CAA\">)[</span><span style=\"color: #EA9A97\">0</span><span style=\"color: #908CAA\">];</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                    </span><span style=\"color: #3E8FB0\">break</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #908CAA\">&#125;</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">catch</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">(</span><span style=\"color: #3E8FB0\">IOException</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #C4A7E7; font-style: italic\">e</span><span style=\"color: #908CAA\">)</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">throw</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">RuntimeException</span><span style=\"color: #908CAA\">(</span><span style=\"color: #E0DEF4\">e</span><span style=\"color: #908CAA\">);</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">return</span><span style=\"color: #E0DEF4\"> remoteAuthToken</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">    </span><span style=\"color: #908CAA; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">     * Get the port that current lcu in running on</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">     * </span><span style=\"color: #3E8FB0; font-style: italic\">@return</span><span style=\"color: #6E6A86; font-style: italic\"> The port that current lcu in running on</span></span>\n<span class=\"line\"><span style=\"color: #6E6A86; font-style: italic\">     </span><span style=\"color: #908CAA; font-style: italic\">*/</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #3E8FB0\">public</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">static</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">String</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">getAppPort</span><span style=\"color: #908CAA\">()</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">ProcessBuilder</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">processBuilder</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">ProcessBuilder</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot;bash&quot;</span><span style=\"color: #908CAA\">,</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #F6C177\">&quot;-c&quot;</span><span style=\"color: #908CAA\">,</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #F6C177\">&quot;ps -eo cmd | grep &#39;LeagueClientUx.exe&#39;&quot;</span><span style=\"color: #908CAA\">);</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">String</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">appPort</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">null</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">try</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">Process</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">process</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">processBuilder</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">start</span><span style=\"color: #908CAA\">();</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">String</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">line</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">BufferedReader</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">reader</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">BufferedReader</span><span style=\"color: #908CAA\">(</span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">InputStreamReader</span><span style=\"color: #908CAA\">(</span><span style=\"color: #E0DEF4; font-style: italic\">process</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">getInputStream</span><span style=\"color: #908CAA\">()));</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">while</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">((</span><span style=\"color: #E0DEF4\">line </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">reader</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">readLine</span><span style=\"color: #908CAA\">())</span><span style=\"color: #3E8FB0\">!=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">null</span><span style=\"color: #908CAA\">)</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                </span><span style=\"color: #3E8FB0\">if</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">(</span><span style=\"color: #E0DEF4; font-style: italic\">line</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">contains</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot;--app-port&quot;</span><span style=\"color: #908CAA\">))</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                    appPort </span><span style=\"color: #3E8FB0\">=</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #E0DEF4; font-style: italic\">line</span><span style=\"color: #908CAA\">.</span><span style=\"color: #EA9A97\">split</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot;--app-port=&quot;</span><span style=\"color: #908CAA\">)[</span><span style=\"color: #EA9A97\">1</span><span style=\"color: #908CAA\">].</span><span style=\"color: #EA9A97\">split</span><span style=\"color: #908CAA\">(</span><span style=\"color: #F6C177\">&quot; &quot;</span><span style=\"color: #908CAA\">)[</span><span style=\"color: #EA9A97\">0</span><span style=\"color: #908CAA\">];</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                    </span><span style=\"color: #3E8FB0\">break</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">                </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #908CAA\">&#125;</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">catch</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">(</span><span style=\"color: #3E8FB0\">Exception</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #C4A7E7; font-style: italic\">e</span><span style=\"color: #908CAA\">)</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #908CAA\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">            </span><span style=\"color: #3E8FB0\">throw</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #3E8FB0\">new</span><span style=\"color: #E0DEF4\"> </span><span style=\"color: #EA9A97\">RuntimeException</span><span style=\"color: #908CAA\">(</span><span style=\"color: #E0DEF4\">e</span><span style=\"color: #908CAA\">);</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">        </span><span style=\"color: #3E8FB0\">return</span><span style=\"color: #E0DEF4\"> appPort</span><span style=\"color: #908CAA\">;</span></span>\n<span class=\"line\"><span style=\"color: #E0DEF4\">    </span><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #908CAA\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>注意这里拿到了token后, 还需要</p>\n<ol>\n<li>先使用base64加密</li>\n<li>再在前面加上 <code>Basic </code> 注意Basic后面需要有一个空格</li>\n</ol>\n<p>这样,我们就获取好了向LCU API发送请求的请求参数了.</p>\n<h2 id=\"2-LCU-Api文档\"><a href=\"#2-LCU-Api文档\" class=\"headerlink\" title=\"2. LCU Api文档\"></a>2. LCU Api文档</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://lcu.vivide.re/\">https://lcu.vivide.re/</a></p></blockquote>\n<h2 id=\"3-向LCU-API发送第一个请求\"><a href=\"#3-向LCU-API发送第一个请求\" class=\"headerlink\" title=\"3. 向LCU API发送第一个请求.\"></a>3. 向LCU API发送第一个请求.</h2><p>请求参数: Authorization: 处理好的token</p>\n<p>url: <a href=\"https://localhost:{portnumber}/apixxx\">https://localhost:{portnumber}/apixxx</a></p>\n<p>注意 请求必须是https协议</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #e0def4\">https://127.0.0.1:40703/lol-summoner/v1/current-summoner</span></span></code></pre></div><p><img src=\"/../img/2023-07-11-%E6%8E%A2%E7%B4%A2LCU/image-20231110232752929.png\" alt=\"image-20231110232752929\"></p>\n<p>访问接口测试通过后, 就可以用httpclient来模拟请求了.</p>\n<p>Http请求工具类</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki rose-pine-moon\" style=\"background-color: #232136\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #e0def4\">package com.anicaaz.leaguewarefx.utils;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import com.fasterxml.jackson.databind.ObjectMapper;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import lombok.AllArgsConstructor;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import lombok.Data;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import lombok.NoArgsConstructor;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import javax.net.ssl.HttpsURLConnection;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import javax.net.ssl.SSLContext;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import javax.net.ssl.TrustManager;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import javax.net.ssl.X509TrustManager;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import java.io.IOException;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import java.net.HttpURLConnection;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import java.net.URL;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">import java.util.Map;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">@Data</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">@AllArgsConstructor</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">@NoArgsConstructor</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">public class HttpsUtils &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    private String apiUrl;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    private String requestMethod;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    public Map&lt;String, Object&gt; sendHttpRequest(String authorizationToken) throws IOException &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 设置请求地址</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        URL url = new URL(apiUrl);</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        disableSslVerification();</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 打开连接</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        HttpURLConnection connection = (HttpURLConnection) url.openConnection();</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 设置请求方法</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        connection.setRequestMethod(requestMethod);</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 添加请求头，设置Authorization参数</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        connection.setRequestProperty(&quot;Authorization&quot;, authorizationToken);</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 获取响应码</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        int responseCode = connection.getResponseCode();</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        System.out.println(&quot;Response Code: &quot; + responseCode);</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 读取响应内容并将其映射到Map</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        ObjectMapper objectMapper = new ObjectMapper();</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        Map&lt;String, Object&gt; responseMap = objectMapper.readValue(connection.getInputStream(), Map.class);</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        connection.disconnect();</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        // 返回响应的Map</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        return responseMap;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    public static String constructUrl(String baseUrl, String appPort, String requestUrl) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        return baseUrl + appPort + &quot;/&quot; + requestUrl;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    private void disableSslVerification() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">            TrustManager[] trustAllCerts = new TrustManager[]&#123;new X509TrustManager() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                public java.security.cert.X509Certificate[] getAcceptedIssuers() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                    return null;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                public void checkClientTrusted(</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                        java.security.cert.X509Certificate[] certs, String authType) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                public void checkServerTrusted(</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                        java.security.cert.X509Certificate[] certs, String authType) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">            &#125;&#125;;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">            SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">            sc.init(null, trustAllCerts, new java.security.SecureRandom());</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        &#125; catch (Exception e) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">            e.printStackTrace();</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #e0def4\"></span></span></code></pre></div><p>注意, 这里需要<strong>禁用ssl验证</strong>. 否则会因为没有证书而一直无法发送请求.</p>\n","text":"LeagueWare–仿照Wegame从零构建第三方英雄联盟客户端助手项目依赖 xml&lt;!--JSON转Map依赖--&gt; &lt;dependenc...","permalink":"/post/2023-07-11-探索LCU","photos":[],"count_time":{"symbolsCount":"9.8k","symbolsTime":"9 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#LeagueWare%E2%80%93%E4%BB%BF%E7%85%A7Wegame%E4%BB%8E%E9%9B%B6%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%89%E6%96%B9%E8%8B%B1%E9%9B%84%E8%81%94%E7%9B%9F%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8A%A9%E6%89%8B\"><span class=\"toc-text\">LeagueWare–仿照Wegame从零构建第三方英雄联盟客户端助手</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E8%8E%B7%E5%8F%96remote-Auth-token-%E5%92%8C-app-port\"><span class=\"toc-text\">1. 获取remote-Auth-token 和 app-port</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-LCU-Api%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">2. LCU Api文档</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E5%90%91LCU-API%E5%8F%91%E9%80%81%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">3. 向LCU API发送第一个请求.</span></a></li></ol></li></ol>","author":{"name":"Kangwei Zhu","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/93107633?v=4","link":"/","description":"偏我来时不逢春，偏我去时春满城","socials":{"github":"https://github.com/KangweiZhu","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"leetcode":{"icon":"/svg/leetcode-svgrepo-com.svg","link":"https://leetcode.com/anicaaovo/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"连接远程数据库问题","uid":"24f094e932e9fa7c1ea3469108ff02c2","slug":"连接阿里云数据库问题","date":"2023-09-22T10:35:48.000Z","updated":"2023-11-08T23:11:26.285Z","comments":true,"path":"api/articles/连接阿里云数据库问题.json","keywords":"Kangwei Zhu's Blog","cover":null,"text":" 连接远程数据库时，datagrip报错：[HY000][1130] null, message from server: “Host ‘pool-100-1-...","permalink":"/post/连接阿里云数据库问题","photos":[],"count_time":{"symbolsCount":643,"symbolsTime":"1 mins."},"categories":[{"name":"数据库","slug":"数据库","count":1,"path":"api/categories/数据库.json"}],"tags":[{"name":"Mysql","slug":"Mysql","count":2,"path":"api/tags/Mysql.json"}],"author":{"name":"Kangwei Zhu","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/93107633?v=4","link":"/","description":"偏我来时不逢春，偏我去时春满城","socials":{"github":"https://github.com/KangweiZhu","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"leetcode":{"icon":"/svg/leetcode-svgrepo-com.svg","link":"https://leetcode.com/anicaaovo/"}}}}},"next_post":{"title":"多线程笔记","uid":"a8cb7e5b0948656e80258acbb14ae2c8","slug":"多线程","date":"2023-03-12T10:02:04.000Z","updated":"2023-11-08T23:11:26.282Z","comments":true,"path":"api/articles/多线程.json","keywords":"Kangwei Zhu's Blog","cover":"/img/cake.jpg","text":"Thread的三种创建方式1. 继承Thread类 重写run()方法。将run()方法中内容替换成你想要的代码逻辑。然后创建这个线程的对象，调用start()...","permalink":"/post/多线程","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"Java基础","slug":"Java基础","count":3,"path":"api/categories/Java基础.json"}],"tags":[{"name":"Java多线程","slug":"Java多线程","count":1,"path":"api/tags/Java多线程.json"}],"author":{"name":"Kangwei Zhu","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/93107633?v=4","link":"/","description":"偏我来时不逢春，偏我去时春满城","socials":{"github":"https://github.com/KangweiZhu","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"leetcode":{"icon":"/svg/leetcode-svgrepo-com.svg","link":"https://leetcode.com/anicaaovo/"}}}}}}